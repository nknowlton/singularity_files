Bootstrap: docker
From: ubuntu:14.04

%post 
samtools_version=0.1.18
pindel_version=0.2.5

#this will install all necessary packages and prepare the container
apt-get -y update
apt-get -y install make gcc zlib1g-dev libncurses5-dev wget g++
cd /opt \
    && wget https://sourceforge.net/projects/samtools/files/samtools/${samtools_version}/samtools-${samtools_version}.tar.bz2 \
    && tar -xf samtools-${samtools_version}.tar.bz2 \
    && make CFLAGS='-g -Wall -O2 -fPIC' -C samtools-${samtools_version} \
    && cp samtools-${samtools_version}/samtools /usr/bin \
    && rm /opt/samtools-${samtools_version}.tar.bz2
    
cd /opt \
    && wget -N https://github.com/genome/pindel/archive/v${pindel_version}.tar.gz \
    && tar -xzf v${pindel_version}.tar.gz \
    && cd pindel-${pindel_version} \
    && ./INSTALL /opt/samtools-0.1.18/ \
    && cp *pindel* /usr/bin \
    && rm /opt/v${pindel_version}.tar.gz

%runscript 
#This program is called with 'pindel' and 'pindel2vcf'
if [ $# -eq 0 ]
   then 
     	echo "pindel or pindel2vcf, with options required"
else
	exec $@
fi